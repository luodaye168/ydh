<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>服务日志查看</title>
  <style>
    body {
      font-family: monospace;
      background: #f5f5f5;
      padding: 20px;
    }

    pre {
      background: #fff;
      border: 1px solid #ccc;
      padding: 15px;
      max-height: 80vh;
      overflow: auto;
    }

    button {
      margin-bottom: 10px;
    }
  </style>
</head>

<body>
  <h2>服务日志</h2>
  <button onclick="loadLog()">刷新日志</button>
  <button onclick="deleteLog()">删除日志</button>
  <pre id="logContent">加载中...</pre>
  <script>
    function loadLog() {
      fetch('/logs')
        .then(res => res.text())
        .then(text => {
          document.getElementById('logContent').textContent = text;
        })
        .catch(() => {
          document.getElementById('logContent').textContent = '日志加载失败';
        });
    }
    function deleteLog() {
      if (!confirm('确定要删除所有日志吗？')) return;
      fetch('/logs', { method: 'DELETE' })
        .then(res => res.text())
        .then(msg => {
          alert(msg);
          loadLog();
        })
        .catch(() => alert('日志删除失败'));
    }
    loadLog();
  </script>
</body>

</html>